<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<!-- <style>
			#arjsDebugUIContainer{ display: none!important; }
		</style> -->
		<!-- <style type="text/css">
			#warning-message { display: none; }
			@media only screen and (orientation:portrait){
				#wrapper { display:none; }
				#warning-message { display:block; }
			}
			@media only screen and (orientation:landscape){
				#warning-message { display:none; }
			}
		</style> -->

		<!-- <script src="js/aframe.js"></script> -->
		<script src="https://aframe.io/releases/0.9.0/aframe.min.js"></script>
		<!-- include aframe-ar.js -->
		<!-- <script src="js/aframe-ar.js"></script> -->
		<!-- <script src="js/aframe-ar_fixed.js"></script> -->
		<script src="js/aframe-ar_242.js"></script>
		<!-- <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/dev/aframe/build/aframe-ar.js"></script> -->
		<!-- Register an aframe component that allows reacting to marker events -->

		<script>
			AFRAME.registerComponent('registerevents', {
				init: function () {
					//this handler don't work with a-marker-camera
					var marker = this.el;
					marker.addEventListener('markerFound', function() {
						var markerId = marker.id;
						console.log('markerFound', markerId);
						// TODO: Add your own code here to react to the marker being found.
						document.querySelector("#vid").play();
					});

					marker.addEventListener('markerLost', function() {
						var markerId = marker.id;
						console.log('markerLost', markerId);
						// TODO: Add your own code here to react to the marker being lost.
						document.querySelector("#vid").pause();
					});
					// this.vidToggle = false;
					// document.querySelector("#vid").pause();
				},
				// tick: function () {
				// 	if(document.querySelector("a-marker-camera").object3D.visible == true) {
				// 		if (!this.vidToggle) {
				// 			this.vidToggle = true;
				// 			var promise = document.querySelector("#vid").play();

				// 			if (promise !== undefined) {
				// 				promise.then(_ => {
				// 					console.log('done');
				// 				// Autoplay started!
				// 			}).catch(error => {
				// 				console.log(error.message);
				// 				// Autoplay was prevented.
				// 				// Show a "Play" button so that user can start playback.
				// 			});
				// 			}

				// 			// document.querySelector("#vid").play().catch(function() {
				// 			// 	console.log('err');
				// 			// });;
				// 		}
				// 	} else {
				// 		this.vidToggle = false;
				// 		document.querySelector("#vid").pause();
				// 	}
				// }
			});
		</script>
	</head>

	<body style='margin : 0px; overflow: hidden; font-family: Monospace;'>
		<!-- <div id="wrapper"> -->
		<a-scene embedded arjs='sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>
		<!-- <a-scene embedded arjs='sourceType: webcam;'> -->
			<a-assets>
				<!-- <video crossOrigin="anonymous" id="vid" autoplay loop="true" type="video/mp4" src="data/video/video_2019-03-04_12-44-59.mp4"></video> -->
				<!-- <video crossOrigin="anonymous" id="vid" autoplay loop="true" type="video/mp4" src="data/video/vid.mp4"></video> -->
				<img id="hiroClick" src="data/HIRO_click.jpg">
			</a-assets>

			<!-- handle hiro marker -->
			<!-- 'registerevents' will register event listeners for the marker when it is found and lost,
			as defined in the inline script above -->
			<!-- <a-marker-camera preset='hiro' id='marker-hiro' registerevents> -->
			<!-- <a-marker-camera type='pattern' url="data/pattern-marker-a-n.patt" registerevents> -->
			<a-marker preset='hiro' id='marker-hiro' registerevents>
			<!-- <a-marker type='pattern' url="data/photo-marker-pattern.patt" registerevents> -->
				<!-- <a-video src="#vid" width="1" height="1" position="0 0 0" rotation="270 0 0" play="true"></a-video> -->
				<a-image src="#hiroClick" rotation="270 0 0"></a-image>
			</a-marker>
			<!-- </a-marker-camera> -->

			<!-- add a simple camera -->
			<a-entity camera="active: true" data-aframe-default-camera></a-entity>
			<!-- <a-entity camera position="0 0 0"></a-entity> -->
			<!-- <a-camera type='pattern' patternUrl='data/pattern-marker.patt'></a-camera> -->
			<!-- <a-camera position="0 -1.6 0" zoom="0"></a-camera> -->
		</a-scene>
		<!-- </div>
		<div id="warning-message">
			this website is only viewable in landscape mode
		</div> -->
	</body>
</html>
